
A = [0 1;
    -1 -1];
B1 = [0 0; 
    1 0];
B2 = [0; 1];
C1 = [1 0];
D1 = [0 1];
C2 = [2 0; 
    0 0];
D2 = [0; 1];

g = 1.5119;

[P, ~, ~] = icare(A', C1', B1 * B1', D1 * D1', [], [], g^(-2) * C2' * C2);
[Q,K,~] = icare(A, B2, C2' * C2, D2' * D2, [], [], g^(-2) * B1 * B1');

K = -K
L = -P * (eye(2) - g^(-2) * Q * P)^(-1) * (C1 + g^(-2) * D1 * B1' * Q)' * (D1 * D1')^(-1)

sys = ss([A, B2 * K; -L * C1, A + B1 * g^(-2) * B1' * Q + B2 * K + L * (C1 + D1 * g^(-2) * B1' * Q)], [B1; -L * D1], [C2, D2 * K], 0);
W = tf(sys);

Hinf = norm(W, Inf)